<!DOCTYPE html>
<html>
  <head>
    <title>Indie Film Classes - Waiting List</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <header>
      <!-- Hamburger -->
      <div class="menu-icon" onclick="toggleMenu()">
        <div class="bar"></div>
        <div class="bar"></div>
        <div class="bar"></div>
      </div>

      <!-- Overlay for the menu -->
      <div class="overlay" onclick="toggleMenu()" id="overlay">
        <div class="close-icon" onclick="toggleMenu()">Ã—</div>
        <!-- Navigation / smaller screens -->
        <nav class="navbar">
          <a href="./">Home</a>
          <a href="/about">About</a>
          <a href="/classes">Classes</a>
          <a href="/contact">Contact</a>
        </nav>
      </div>

      <!-- Nnavigation / desktop -->
      <nav class="navbar-desktop">
        <a href="./">Home</a>
        <a href="/about">About</a>
        <a href="/classes">Classes</a>
        <a href="/contact">Contact</a>
      </nav>
      <script>
        function submitForm() {
          var form = document.querySelector("form");
          var formData = new FormData(form);

          // Perform basic form validation
          if (!form.checkValidity()) {
            alert("Please fill in all required fields.");
            return;
          }

          // Show loading icon
          var loadingIcon = document.getElementById("loading-icon");
          loadingIcon.style.display = "block";

          var xhr = new XMLHttpRequest();
          var url =
            "https://script.google.com/macros/s/AKfycbxPmEddZJjUa_lvcLvdfDS34qVYmhHGUi830_GYCSKktnDZNWLQTIdCqgRG59ZVr0nTPQ/exec";

          xhr.open("POST", url, true);
          xhr.onreadystatechange = function () {
            if (xhr.readyState == 4) {
              // Hide loading icon regardless of success or failure
              loadingIcon.style.display = "none";

              if (xhr.status == 200) {
                var result = JSON.parse(xhr.responseText);
                if (result.result === "success") {
                  window.location.href = result.redirect;
                } else {
                  // Handle error if needed
                  console.error(result.error);
                }
              }
            }
          };
          xhr.send(formData);
        }
      </script>
    </header>

    <div class="container" style="padding-top: 10vh">
      <div class="content">
        <h2>Join Our Waiting List</h2>
        <p class="sub-text-small">
          We are experiencing high demand. Our next class is scheduled to
          commence in early 2024. We encourage you to join the waiting list to
          secure your spot early.
        </p>
        <p class="sub-text-small">
          As soon as we have places available, we will send you an email.
        </p>

        <form
          method="POST"
          action="https://script.google.com/macros/s/AKfycbxPmEddZJjUa_lvcLvdfDS34qVYmhHGUi830_GYCSKktnDZNWLQTIdCqgRG59ZVr0nTPQ/exec"
        >
          <input name="Email" type="email" placeholder="Email" required />
          <input name="Name" type="text" placeholder="Your Name" required />

          <select id="class" name="Class" required>
            <option value="">- Select -</option>
            <option disabled>London Classes</option>
            <option value="Screenwriting For Indie Film (London)">
              Screenwriting For Indie Film (London)
            </option>
            <option value="Make Real-Time Feature Films (London)">
              Make Real-Time Feature Films (London)
            </option>
            <option value="Low Budget Filmmaking 101 (London)">
              Low Budget Filmmaking 101 (London)
            </option>
            <option disabled>Kyoto Classes</option>
            <option value="Screenwriting For Indie Film (Kyoto)">
              Screenwriting For Indie Film (Kyoto)
            </option>
            <option value="Make Real-Time Feature Films (Kyoto)">
              Make Real-Time Feature Films (Kyoto)
            </option>
            <option value="Low Budget Filmmaking 101 (Kyoto)">
              Low Budget Filmmaking 101 (Kyoto)
            </option>
            <option disabled>Online Classes</option>
            <option value="Screenwriting For Indie Film (Online)">
              Screenwriting For Indie Film (Online)
            </option>
            <option value="Make Real-Time Feature Films (Online)">
              Make Real-Time Feature Films (Online)
            </option>
            <option value="Low Budget Filmmaking 101 (Online)">
              Low Budget Filmmaking 101 (Online)
            </option>
          </select>

          <div class="devider-30"></div>
          <div id="loading-icon">Thank you...</div>

          <button class="book-button" type="button" onclick="submitForm()">
            Submit
          </button>
        </form>
      </div>
    </div>

    <div class="devider-30"></div>

    <script src="script.js"></script>
  </body>
</html>
